#include <linux/module.h> #include <linux/init.h> #include <linux/kernel.h> #include <linux/stddef.h> #include <linux/input.h> static int __init offset_mod_init(void){ printk(KERN_INFO "input_dev.name             = 0x%zx\n", offsetof(struct input_dev, name)); printk(KERN_INFO "input_dev.phys             = 0x%zx\n", offsetof(struct input_dev, phys)); printk(KERN_INFO "input_dev.uniq             = 0x%zx\n", offsetof(struct input_dev, uniq)); printk(KERN_INFO "input_dev.id               = 0x%zx\n", offsetof(struct input_dev, id)); printk(KERN_INFO "input_dev.event_lock       = 0x%zx\n", offsetof(struct input_dev, event_lock)); printk(KERN_INFO "input_dev.mutex            = 0x%zx\n", offsetof(struct input_dev, mutex)); printk(KERN_INFO "input_dev.users            = 0x%zx\n", offsetof(struct input_dev, users)); printk(KERN_INFO "input_dev.going_away       = 0x%zx\n", offsetof(struct input_dev, going_away)); printk(KERN_INFO "input_dev.dev              = 0x%zx\n", offsetof(struct input_dev, dev)); printk(KERN_INFO "input_dev.h_list           = 0x%zx\n", offsetof(struct input_dev, h_list)); printk(KERN_INFO "input_dev.node             = 0x%zx\n", offsetof(struct input_dev, node)); printk(KERN_INFO "sizeof(struct input_dev)   = 0x%zx\n", sizeof(struct input_dev)); return 0; } static void __exit offset_mod_exit(void){ printk(KERN_INFO "offset_mod exit\n"); } module_init(offset_mod_init); module_exit(offset_mod_exit); MODULE_LICENSE("GPL");

